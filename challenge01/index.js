const input = `
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com
usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com

usr:@itziar age:19
loc:isle psw:aaa fll:222
eme:itzi@gmail.com

usr:@midudev eme:mi@gmail.com psw:123456 age:38 loc:bcn fll:82

fll:111 eme:yrfa@gmail.com usr:@codember
psw:123456 age:21 loc:World

usr:@giroz age:22 src:12 icon:avatar.png terminal:yes
pages:server
pages:blog
blog:about
loc:tierra psw:aaa fll:222
eme:giroz@gmail.com

psw:11133 loc:Canary
fll:333 usr:@pheralb
eme:pheralb@gmail.com
`;

const requiredFields = ["usr", "eme", "psw", "age", "loc", "fll"];

const validateUser = (userDataFields) => {
  let isValid = true;

  if (userDataFields.length < requiredFields.length) isValid = false;

  let successes = 0;
  userDataFields.forEach((field) => {
    if (requiredFields.includes(field)) successes += 1;
  });

  if (successes < requiredFields.length) isValid = false;

  return isValid;
};

const formatedUserData = (userData) => {
  const formatedDataArray = userData
    .split(/\s/)
    .map((data) => {
      if (!data) return null;

      const separatorIdx = data.indexOf(":");
      const field = data.substring(0, separatorIdx);
      const value = data.substring(separatorIdx + 1);

      return [field, value];
    })
    .filter(Boolean);

  return formatedDataArray;
};

const getUsersData = (data) => {
  const userDataArray = data.split("\n\n");

  const users = userDataArray.map((userData) => {
    const user = Object.fromEntries(formatedUserData(userData));
    const userFields = Object.keys(user);

    return { ...user, isValid: validateUser(userFields) };
  });

  return users;
};

const getNumberOfValidUsers = (users) =>
  users.filter((user) => user.isValid).length;
const getLastValidUser = (users) => users.findLast((user) => user.isValid);

// Response
const users = getUsersData(input);
const response = `${getNumberOfValidUsers(users)}${
  getLastValidUser(users)?.usr || ""
}`;
console.log(response);
